<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Methods · Forecast.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Forecast.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Forecast.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">What is this about?</a></li><li><a class="tocitem" href="../quickstart/">Quick Start</a></li><li class="is-active"><a class="tocitem" href>Methods</a><ul class="internal"><li><a class="tocitem" href="#acf"><span>acf</span></a></li><li><a class="tocitem" href="#ccf"><span>ccf</span></a></li><li><a class="tocitem" href="#d"><span>d</span></a></li><li><a class="tocitem" href="#loess"><span>loess</span></a></li><li><a class="tocitem" href="#p"><span>p</span></a></li><li><a class="tocitem" href="#stl"><span>stl</span></a></li></ul></li><li><a class="tocitem" href="../datasets/">Datasets</a></li><li><a class="tocitem" href="../docstrings/">Docstrings</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Methods</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Methods</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/viraltux/Forecast.jl/blob/master/docs/src/man/methods.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h1><ul><li>Auto-correlation/covariance function</li><li>Cros-correlation/covariance function</li><li>Lagged differences of a given order</li><li>Locally Estimated Scatterplot Smoothing (LOESS)</li><li>Seasonal and Trend decomposition based on Loess (STL)</li><li>Simple Moving Average</li></ul><h2 id="acf"><a class="docs-heading-anchor" href="#acf">acf</a><a id="acf-1"></a><a class="docs-heading-anchor-permalink" href="#acf" title="Permalink"></a></h2><p><strong>Auto-correlation/covariance function</strong></p><article class="docstring"><header><a class="docstring-binding" id="Forecast.acf" href="#Forecast.acf"><code>Forecast.acf</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Package: Forecast</p><pre><code class="language-none">acf(x::{AbstractVector,TimeArray},
    type = &quot;cor&quot;,
    lag = Integer(ceil(10*log10(length(x)))),
    alpha = (0.95,0.99))</code></pre><p>Compute the auto-correlation or auto-covariance for an univariate series.</p><p>The results are normalized to preserve homoscedasticity. The distribution used to normalize the data is an approximation of a Fisher Transformation via a Normal Distribution. There is a plot recipe for the returned object, if the type is <code>cor</code> the plot will also show confidence intervals for the given alpha values.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Vector or uni-dimensional TimeArray of data.</li><li><code>type</code>: Valid values are &quot;cor&quot; for correlation (default) and &quot;cov&quot; for convariance.</li><li><code>lag</code>: Maximum number of lags.</li><li><code>alpha</code>: A tuple with two thresholds (t1,t2) with t1 &lt;= t2 to plot confidence intervals. The default values are 0.95 and 0.99.</li></ul><p><strong>Returns</strong></p><p>A CCF object.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; x = rand(100);
res = acf(x1; type=&quot;cor&quot;);
plot(res)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/viraltux/Forecast.jl/blob/630ae8ff1cf7069ab947bf36367bc5f53577c364/src/acf.jl#L1-L28">source</a></section></article><h2 id="ccf"><a class="docs-heading-anchor" href="#ccf">ccf</a><a id="ccf-1"></a><a class="docs-heading-anchor-permalink" href="#ccf" title="Permalink"></a></h2><p><strong>Cros-correlation/covariance function</strong></p><article class="docstring"><header><a class="docstring-binding" id="Forecast.ccf" href="#Forecast.ccf"><code>Forecast.ccf</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Package: Forecast</p><pre><code class="language-none">ccf(x1::{AbstractVector,TimeArray},
    x2::{AbstractVector,TimeArray};
    type = &quot;cor&quot;,
    lag = Integer(ceil(10*log10(length(x1)))),
    alpha = (0.95,0.99))</code></pre><p>Compute the cross-correlation or cros-covariance of two univariate series.</p><p>The results are normalized to preserve homoscedasticity. The distribution used to normalize the data is an approximation of a Fisher Transformation via a Normal Distribution. There is a plot recipe for the returned object, if the type is <code>cor</code> the plot will also show confidence intervals for the given alpha values.</p><p>If, for a given integer <code>k</code>, <code>x2</code> repeats <code>x1</code> values such that x1[t] = x2[t+k] for all <code>i</code> then high correlation value will be placed <em>at the right from the center</em> in the results. That is, this convention will be represented in the plots as <code>x1_t = x2_{t+k} -&gt; _____0__k__</code> meaning x2 behavior can be predicted by x1 in k units.</p><p><strong>Arguments</strong></p><ul><li><code>x1</code>: Vector or uni-dimensional TimeArray of data.</li><li><code>x2</code>: Vector or uni-dimensional TimeArray of data.</li><li><code>type</code>: Valid values are &quot;cor&quot; for correlation (default) and &quot;cov&quot; for convariance.</li><li><code>lag</code>: Maximum number of lags.</li><li><code>alpha</code>: A tuple with two thresholds (t1,t2) with t1 &lt;= t2 to plot confidence intervals. The default values are 0.95 and 0.99.</li></ul><p><strong>Returns</strong></p><p>A CCF object. </p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; x1 = rand(100);
x2 = circshift(x1,6);
res = ccf(x1, x2; type=&quot;cor&quot;);
plot(res)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/viraltux/Forecast.jl/blob/630ae8ff1cf7069ab947bf36367bc5f53577c364/src/ccf.jl#L1-L33">source</a></section></article><h2 id="d"><a class="docs-heading-anchor" href="#d">d</a><a id="d-1"></a><a class="docs-heading-anchor-permalink" href="#d" title="Permalink"></a></h2><p><strong>Lagged differences of a given order</strong></p><article class="docstring"><header><a class="docstring-binding" id="Forecast.d" href="#Forecast.d"><code>Forecast.d</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Package: Forecast</p><pre><code class="language-none">function d(x::{AbstractVector,AbstractArray,TimeArray},
           order::Int=1,
           lag::Int=1;
           center::Bool=false)</code></pre><p>Return Lagged differences of a given order for Vector, Array and TimeSeries.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Vector or Array of data.</li><li><code>order</code>: Order of the differences; number of recursive iterations on the same vector/array.</li><li><code>lag</code>: Lag for the difference.</li><li><code>center</code>: Center the result in the response using Missing values.</li></ul><p><strong>Returns</strong></p><p>Lagged differences Vector or Array of a given order.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; x = [1,2,3,4,5];
julia&gt; d(x)
4-element Array{Int64,1}:
 1
 1
 1
 1

julia&gt; d(x,2)
3-element Array{Int64,1}:
 0
 0
 0

julia&gt; d(x,1,2)
3-element Array{Int64,1}:
 2
 2
 2

julia&gt; x = reshape(collect(1:20),10,2)
10×2 Array{Int64,2}:
  1  11
  2  12
  3  13
  4  14
  5  15
  6  16
  7  17
  8  18
  9  19
 10  20 

julia&gt; d(x,2,2)
8×2 Array{Any,2}:
 2  2
 2  2
 2  2
 2  2
 2  2
 2  2
 2  2
 2  2

julia&gt; d(co2())
[ Info: Dataset used in Cleveland et al. paper
4608×1 TimeArray{Any,1,Date,Array{Any,1}} 1974-05-17 to 1986-12-30
│            │ A       │
├────────────┼─────────┤
│ 1974-05-17 │ -0.27   │
│ 1974-05-18 │ 0.35    │
│ 1974-05-19 │ 0.18    │
   ⋮
│ 1986-12-28 │ 0.04    │
│ 1986-12-29 │ -0.12   │
│ 1986-12-30 │ missing │</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/viraltux/Forecast.jl/blob/630ae8ff1cf7069ab947bf36367bc5f53577c364/src/d.jl#L1-L79">source</a></section></article><h2 id="loess"><a class="docs-heading-anchor" href="#loess">loess</a><a id="loess-1"></a><a class="docs-heading-anchor-permalink" href="#loess" title="Permalink"></a></h2><p><strong>Locally Estimated Scatterplot Smoothing (LOESS)</strong></p><article class="docstring"><header><a class="docstring-binding" id="Forecast.loess" href="#Forecast.loess"><code>Forecast.loess</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Package: Forecast</p><pre><code class="language-none">loess(xv,yv;
      d=2,
      q=Int64(round(3/4*length(xv))),
      rho=repeat([1.0],inner=length(xv)),  
      predict = xv)</code></pre><p>Smooth a vector of observations using locally weighted regressions.</p><p>Although loess can be used to smooth observations for any given number of independent variables, this implementation is univariate. The speed of loess can be greatly increased by using fast aproximations for the linear fitting calculations, however this implementation calculates only exact results.</p><p>The loess functionality and nomenclature follows the descriptions in:</p><p>&quot;STL: A Seasonal, Trend Decomposition Procedure Based on Loess&quot; Robert B. Cleveland, William S. Cleveland, Jean E. McRae, and Irma Terpenning. Journal of Official Statistics Vol. 6. No. 1, 1990, pp. 3-73 (c) Statistics Sweden.</p><p><strong>Arguments</strong></p><ul><li><code>xv</code>: Observations&#39; support.</li><li><code>yv</code>: Observation values.</li><li><code>d</code>: Degree of the linear fit, it accepts values 1 or 2.</li><li><code>q</code>: As q increases loess becomes smoother, when q tends to infinity loess tends to an ordinary least square poynomial fit of degree <code>d</code>. It defaults to the rounding of 3/4 of xv&#39;s length.</li><li><code>rho</code>: Weights expressing the reliability of the observations (e.g. if yi had variances sigma^2*ki where ki where known, the rhoi could be 1/ki). It defaults to 1.0.</li><li><code>predict</code>: Vector containing the real values to be predicted, by default predicts xv.</li></ul><p><strong>Returns</strong></p><p>The loess values for the values contained in <code>predict</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; loess(rand(5), rand(5); predict=rand(10))
10-element Array{Float64,1}:
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/viraltux/Forecast.jl/blob/630ae8ff1cf7069ab947bf36367bc5f53577c364/src/loess.jl#L31-L67">source</a></section></article><h2 id="p"><a class="docs-heading-anchor" href="#p">p</a><a id="p-1"></a><a class="docs-heading-anchor-permalink" href="#p" title="Permalink"></a></h2><p><strong>Inverse lagged differences of a given order</strong></p><article class="docstring"><header><a class="docstring-binding" id="Forecast.p" href="#Forecast.p"><code>Forecast.p</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Package: Forecast</p><pre><code class="language-none">function p(dx::{AbstractVector,AbstractArray,TimeArray},
           orderlag::{AbstractVector,AbstractArray} = [[0]])</code></pre><p>Return reverse lagged differences of a given order for Vector, Array and TimeSeries.</p><p><strong>Arguments</strong></p><ul><li><code>dx</code>:       Vector or Array of data.</li><li><code>orderlag</code>: Initial values of the inverted series. The format per column for the order and lag values is [[lag<em>1, lag</em>2, ..., lag<em>m], order</em>2, order<em>3, ..., order</em>n]. the default values is an initial constant of zero for an inversion of order one and lag one.</li></ul><p><strong>Returns</strong></p><p>Lagged differences Vector or Array of a given order.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; x = repeat(1:12,3);
julia&gt; dx = d(x,12,12);
julia&gt; orderlag = vcat([collect(1:12)],repeat([0],11));
julia&gt; p(dx,orderlag) ≈ x
true
julia&gt; p(d(x),[[1]]) ≈ x
true

julia&gt; tx = hcat(co2(), co2(), co2());
julia&gt; vtx = values(tx);
julia&gt; tx = TimeArray(timestamp(tx),replace(vtx, missing =&gt; 0.0));
julia&gt; values(p(d(tx), [ [[333.38]] [[333.38]] [[333.38]] ] )) ≈ values(tx)
true
julia&gt; values(p(d(tx,2), [ [[333.38]] [[333.38]] [[333.38]] ; -0.27 -0.27 -0.27] )) ≈ values(tx)
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/viraltux/Forecast.jl/blob/630ae8ff1cf7069ab947bf36367bc5f53577c364/src/p.jl#L1-L34">source</a></section></article><h2 id="stl"><a class="docs-heading-anchor" href="#stl">stl</a><a id="stl-1"></a><a class="docs-heading-anchor-permalink" href="#stl" title="Permalink"></a></h2><p><strong>Seasonal and Trend decomposition based on Loess</strong></p><article class="docstring"><header><a class="docstring-binding" id="Forecast.stl" href="#Forecast.stl"><code>Forecast.stl</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Package: Forecast</p><pre><code class="language-none">stl(Yv, np; robust=false, 
            nl=nextodd(np), 
            ns=10*length(Yv)+1,
            nt=nextodd(1.5*np/(1-1.5/ns)), 
            ni=robust ? 1 : 2,
            no=0,
            spm=false,
            qsmp=max(div(np,7),2))</code></pre><p>Decompose a time series into trend, seasonal, and remainder components.</p><p>&quot;STL has a simple design that consists of a sequence of applications of the loess smoother; the simplicity allows analysis of the properties of the procedure and allows fast computation, even for very long time series and large amounts of trend and seasonal smoothing. Other features of STL  are specification of amounts of seasonal and trend smoothing that range, in a nearly continous way, from very small amount of smoothing to a very large amount; robust estimates of the trend and seasonal components that are not distorted by aberrant behavior in the data; specification of the period of the seasonal component to any intenger multiple of the time sampling interval greater than one; and the ability to decompose time series with missing values.&quot;*</p><p>All default values are chosen following the recommendations of the original paper when those were recommended. <code>ns</code> is recommended to be chosen of the basis of knowledge of the time series and on the basis of diagnostic methods; it must nonethelessbe  always odd and at least 7. A default value is not advised on the original paper, instead the same default value used in the stl implementation in R in usere here.</p><p>for <code>no</code> the authors advise 5 (&quot;safe value&quot;) or 10 (&quot;near certainty of convergence&quot;) cycles  or a convergence criterion when robustness is required, in this case when <code>robust</code> is true computations stop when convergence is achieved in trend and seasonality.</p><p>for <code>qsmp</code> the authors do not adivise a default but they use a value close to div(<code>np</code>,7).</p><p><strong>Arguments</strong></p><ul><li><code>np</code>: Seasonality.</li><li><code>robust</code>: Robust stl.</li><li><code>nl</code>: Smoothing parameter of the low-pass filter.</li><li><code>ns</code>: Smoothing parameter for the seasonal component.</li><li><code>nt</code>: Smoothing parameter for the trend decomposition.</li><li><code>ni</code>: Number of inner loop cycles.</li><li><code>no</code>: Number of outer loop cycles.</li><li><code>spm</code>: Seasonal post-smoothing.</li><li><code>qsmp</code>: Loess q window for Seasonal post-smoothing.</li><li><code>verbose</code>: If true shows updates for the Seasonal and Trend convergence.</li><li><code>cth</code>: Corvengence threshold for Seasonal and Trend.</li></ul><p><strong>Returns</strong></p><p>An <code>STL</code> object with the seasonal, trend and remainder components if Yv is an Array and a TimeSeries object with the same components if Yv is a TimeSeries.</p><ul><li><p>STL: A Seasonal, Trend Decomposition Procedure Based on Loess&quot; Robert B. Cleveland, William S. Cleveland, Jean E. McRae, and Irma Terpenning. Journal of Official Statistics Vol. 6. No. 1, 1990, pp. 3-73 (c) Statistics Sweden.</p></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; stl(co2(),365; robust=true, spm=true)
[ Info: Dataset used in Cleveland et al. paper
[ Info: Corvengence achieved (&lt; 0.01); Stopping computation...
STL{TimeSeries.TimeArray{Union{Missing, Float64},2,
Dates.Date,Array{Union{Missing, Float64},2}}}
(4609×3 TimeSeries.TimeArray{Union{Missing, Float64},2,
Dates.Date,Array{Union{Missing, Float64},2}} 1974-05-17 to 1986-12-31, 
&quot;stl(Yn, np=365; nl=365, ns=46091, nt=549, ni=1, no=0, spm=true, qsmp=52)&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/viraltux/Forecast.jl/blob/630ae8ff1cf7069ab947bf36367bc5f53577c364/src/stl.jl#L1-L53">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstart/">« Quick Start</a><a class="docs-footer-nextpage" href="../datasets/">Datasets »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 28 January 2021 19:28">Thursday 28 January 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
